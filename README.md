
# MUSIC

MUSIC is a 3+1D relativistic second-order viscous hydrodynamics for heavy ion collisions written in C++. A user manual for MUSIC is available here: https://webhome.phy.duke.edu/~jp401/old_music_manual/



## Citation

### Publishing results computed with MUSIC

New results computed with MUSIC may necessitate modifying certain parts of
the code (the routines compute hadronic observables, transport coefficients, initial conditions, ...).
To avoid any confusion about the physics behind MUSIC, we ask that publications containing results computed
with MUSIC specify the initial conditions, equation of state, transport coefficients (first and second order),
freeze-out criteria and other information necessary to reproduce the results.

The following papers should be cited when referring to MUSIC:

1. Schenke, S. Jeon, C. Gale. "3+1D hydrodynamic simulation of relativistic heavy-ion collisions" Phys.Rev.C 82, 014903 (2010) [arXiv:1004.1408]
2. Schenke, S. Jeon, C. Gale. "Elliptic and triangular flow in event-by-event (3+1)D viscous hydrodynamics” Phys.Rev.Lett. 106, 042301 (2011) [arXiv:1009.3244]
3. J.-F. Paquet, C. Shen, G. S. Denicol, M. Luzum, B. Schenke, S. Jeon, and C. Gale. "Production of photons in relativistic heavy-ion collisions” Phys. Rev. C 93, 044906 (2016) [arXiv:1509.06738]

If simulations include net baryon diffusion, please cite in addition,

- G. S. Denicol, C. Gale, S. Jeon, A. Monnai, B. Schenke, and C. Shen, "Net baryon diffusion in fluid dynamic simulations of relativistic heavy-ion collisions," Phys. Rev. C98, 034916 (2018) arXiv:1804.10557 [nucl-th]

The freeze-out surface at constant temperature or energy density is generated by Cornelius.
When using this feature, please cite

- P. Huovinen and H. Petersen, "Particlization in hybrid models," Eur. Phys. J. A48, 171 (2012), arXiv:1206.3371 [nucl-th]

### Modifying MUSIC

MUSIC users may need to modify various parts of the code. The GPL license allows for such modifications to be made and distributed (subject to restrictions that can be found in the license). Nevertheless, we ask and require that you state clearly any scientifically relevant modifications made to the code when you share this modified version of MUSIC. This is to avoid any misunderstanding about the physics behind the code.

### Contributing to MUSIC

Should you make changes to MUSIC that you believe would benefit from being shared with the wider community, please get in touch with the code's maintainers through the MUSIC website. Contributions will be considered whenever possible. While no promises can be made regarding the inclusion of these modifications in the main version of the code, they could be made available separately on the MUSIC website for other users' convenience. Bug fixes will be considered separately and will be applied promptly.


## Compilation

The MUSIC code can be compiled using standard `cmake`. 

Alternatively, you can compile the MUSIC code using a makefile. In this way,
please make sure the information about the openMP and the directory of the
GSL library is correct in the `src/GNUmakefile`. Then one can compile the code
by typing `make`.



## Run MUSIC with an input file

An input file is required that contains the line `EndOfData`, preceded by a
list of parameter names and values, one per line, with parameter names and
values separated by a space or tab. If omitted, each parameter will be assigned
a default value. Example input files can be found under the folder `example_inputfiles/`.

The list of possible parameters and default values, along
with a brief description, can be found in `utilities/music_parameters_dict.py`.

To run hydro simulation, one can start by running the python script
`generate_music_inputfile.py` (can be found in `utilites` folder) to generate input files and job running script.
The job script can run under bash and qsub systems.  For some help information
about `generate_music_inputfile.py`,  one can simply type:

    generate_music_inputfile.py -h



## Run MUSIC on multiple CPU cores

MUSIC uses openMP for parallelization.  For example, to run on two processors 
and use the sample input file, type:

    export OMP_NUM_THREADS=2
    ./MUSIChydro input_example
Once the prerequisites are installed, you can build the package using:

    make -j 10 #Adjust 10 to the number of cores available.

The result will be an executable named **`MUSIChydro`**.
